\chapter{Related Work}\label{ch:litReview}

The primary aim of this section is to offer a comprehensive review of multimodal transportation and mobility research focusing on recent complex systems approaches. In such approaches, the city is studied as a complex system \cite{batty2013new,lobo2020urban}, in which especially urban transport infrastructure, such as streets, sidewalks, bicycle lanes and public transportation systems can be well modelled and understood using methods from network science. From this perspective, single-layer spatial networks, especially transportation networks, have been widely studied~\cite{lin2013complex,barthelemy2011spatial,ding2019application}, finding different topological properties~\cite{jiang2004topological,cardillo2006structural,barthelemy2008patterns,batty2008size,barthelemy2011spatial,strano2013comparative,louf2014typology,boeing2020multiscale}, distribution of centrality metrics~\cite{crucitti2008centrality,boeing2018planarity,kirkley2018structural}, and network growth processes~\cite{makse1995growth,strano2012evolution}. Further topics studied include impacts of the street networks on pedestrian volume \cite{hajrasouliha2015connectivity}, accessibility and vitality of cities~\cite{denadai2016death,biazzo2019accesibility,natera2019walkability}, and resilience and growth of different transportation networks~\cite{baggag2018resilience,ferretti2019resilience,natera2020growth}. %Despite the many successes, network science should be applied to transportation systems with care \cite{zanin2018studying}. 

The most recent of these approaches can be seen as the beginning of the emerging field of Urban Data Science, which exploits large-scale new urban data sets with tools combining geoinformatics, data and network science \cite{organizers2019roundtable,resch2019hds}.

In this section we focus on the combined use of single-layer networks as multilayer networks to characterize the multimodal transportation infrastructure of cities and the human mobility taking place on them. We follow the primal approach to networks \cite{porta2006primal}, where streets and mobility infrastructure constitute the network links, and intersections (bus stops, subway stations, etc.) constitute the nodes of the network.

The remainder of this section is arranged as follows. Section~\ref{sec:multilayernetworks} introduces the mathematical concept of multilayer networks and related theoretical research underlying network science approaches to the topic. In Section~\ref{sec:multimodalinfrastructures} we cover urban infrastructures, measures to quantify their multimodality and models to reproduce the interconnected structures of real-world transportation systems. In Section~\ref{sec:multimodalmobility} we focus on mobility, flows and navigation across these multimodal systems, and implications for transportation choices. %In Section ~\ref{sec:datatools} we cover the relevant open datasets and the main software tools which can be used to analyse multimodal transportation systems. We conclude with an outlook and a summary of open questions for the research community in Section~\ref{sec:conclusions}. 

\section{Multilayer networks: a framework for multimodality}\label{sec:multilayernetworks}

Over the last decades, networks have emerged as a versatile tool to understand, map and visualise the interconnected architecture of a wide range of complex systems~\cite{albert2002statistical,dorogovtsev2002evolution, newman2003structure, boccaletti2006complex}, in particular spatially-embedded ones~\cite{barthelemy2011spatial}. Formally, a network -- or graph -- $\mathcal G = (\mathcal N, \mathcal L)$ consists of a set of nodes $\mathcal N$, and a second set $\mathcal L$ of edges, describing connections among unordered pairs of elements of the first set. This information can be conveniently stored into an adjacency matrix ${A=a_{ij}}$, where $i=1, \dots, N$ are the nodes, and $a_{ij}=1$ if there is a link between nodes $i$ and $j$, $a_{ij}=0$ if there is no link between $i$ and $j$. In transportation systems~\cite{lin2013complex}, nodes can represent the stations of a network, and links direct connections between them. The adjacency matrix can also include weights $W=w_{ij}$, where $w_{ij}$ are positive real numbers, for instance describing how strongly connected two nodes are. For spatial systems, weights are often taken as the reciprocal of the distance between two nodes, or the time it takes to travel from one to another, i.e. $w_{ij}=1/d_{ij}$ or $w_{ij}=1/t_{ij}$.

More recently, network scientists have put a lot of effort in characterising the structure of systems which are formed by different interconnected networks. Also widespread in social and biological networks, these structures are natural for transportation systems. Think for instance of the largest transportation hubs in worldwide cities, where stations are routinely served by bus, underground and railway infrastructures.

Indeed, most urban transportation systems systemically rely on the interplay between different mean of transportation. These systems can be conveniently described by \textit{multiplex} or \textit{multilayer} networks. Here we introduce the so-called \textit{vectorial} formalism for multilayer networks~\cite{boccaletti2014structure, battiston2014structural}, widely used in most papers on multimodal transportation. We note that an alternative description can be provided by a more mathematically involved \textit{tensorial} framework~\cite{dedomenico2013mathematical, kivela2014multilayer}.  

In multilayer networks, links of different types, describing for instance a different mean of transportation, are embedded into different \textit{layers}. Each layer $\alpha$, $\alpha = 1, \ldots, M$, is described by an adjacency matrix 
$ W^{[\alpha]} = w_{ij}^{[\alpha]}$. In a multimodal urban transportation networks with three layers, $\alpha=1$ can represent the bus network, $\alpha=2$ the underground network, and $\alpha=3$ the urban railway network. The full transportation system $\mathcal M$ can be described as $\mathcal W = \{W^{[1]}, \ldots,  W^{[M]}\}$. Nodes $i=1, \dots, N$ are labeled in the same order in all networks. 

In the case of transportation networks, identifying nodes of different networks (urban location) as the same station might not provide the most complete description of the multimodal network. Think for instance of the largest stations in mega-cities, like King's Cross - St. Pancras in London, Grand Central Station in New York or Hongqiao transportation hub in Shanghai. All of those are identified by a unique location (node index) $i$ across the different transportation layers. However, sometimes switching from one mean of transportation to another within the same station might require a non negligible fraction of time and effort, given the complexity and size of the overall infrastructure. 

For this reason, it is often relevant to complement the description of the \textit{intra-layer} connections present in the system, with \textit{inter-layer} links associated to the cost, physical distance or time required to switch layers. Inter-layer links between layers $\alpha$ and $\beta$ at a node $i$ can be encoded through the inter-layer matrix $C_i=c_i^{[\alpha \beta]}$, and all such inter-layer connections can be stored in the vector $ C = \{C_1, \ldots, C_N\}$. In this case, the full multiplex structure of the system is described by taking into account both intra-layer and inter-layer connectivity, hence $\mathcal M = (W,  C)$. Inter-links may be neglected for many measures focusing on diversity~\cite{battiston2014structural}, as well as correlations~\cite{nicosia2015measuring} across the layers of the systems, relevant to assess the different roles and geographical spanning of the different mean of transportations of a multilayer network. 

Multilayer networks are a natural framework for multimodal networks. Indeed, one of the pioneering works introducing the framework and concept of `layered complex networks'~\cite{kurant2006layered} explicitly focused on the case of transportation systems, where a first layer encoded the physical infrastructure of the system, and the second one described the flows on such infrastructure. Other early works on the topic also dealt with interconnected systems at the wordwide level, focusing on different modes of transport such as the multiplex airline networks~\cite{cardillo2013emergence}.

Noticeably, multimodal infrastructures seem to possess exclusive characteristics, different from other multilayer networks. For instance, when tools to assess the redundancy of the different layers are considered, transportation networks are often found to be irreducible~\cite{dedomenico2015structural}. Differently from many biological systems, where layers often duplicate information to guarantee the interconnected system a high level of robustness, the layers of a multiplex transportation systems are purposedly engineered to be different, in order to maximise efficiency~\cite{latora2001efficient}. As a byproduct of this feature, multimodal systems are also often highly fragile~\cite{buldyrev2010catastrophic}, and sensitive to disruptions or failures of a single infrastructure~\cite{dedomenico2014interconnected}. For the reader interested in further material on the topic, we refer to the early reviews~\cite{boccaletti2014structure, kivela2014multilayer} and textbook~\cite{bianconi2018multilayer} covering the field. Ref.~\cite{aleta2019multilayer} provides a more recent eye-bird view of the field. A thorough review of the measures and models used to analyse such systems can be found in Ref.~\cite{battiston2017new}, whereas Ref.~\cite{dedomenico2016physics} gives a theoretical overview of spreading and diffusive processes on such systems. In the following sections of this review, we focus on findings of more direct relevance to the research community working with multimodal transportation and urban mobility. 


\section{Multimodal infrastructures}\label{sec:multimodalinfrastructures}

Multiple approaches have been followed to study the structure of cities, and since the 1950s fields such as Architecture, Urbanism and Transport Planning have grown a large body of literature studying the form and structure of cities and their transport systems. As cities grow and add different transportation modes, understanding the transportation infrastructure and its interconnected nature is crucial to fully capture real-world patterns of urban mobility. With the growth of the fields of Complex Systems and Network Science new tools and models have been develop to study the complexity behind urban systems, and specifically mobility infrastructure.

In particular, multimodal urban infrastructures can be represented as multilayer networks, in which each layer $\alpha$ represents a mobility infrastructure (e.g. subway, light railway, bus service, pedestrian or bicycle infrastructure), the set of nodes $\mathcal{N}$ are locations (e.g. bus stops, intersections, subway stations), and the set of edges $\mathcal{L}$ in layer $\alpha$ are the infrastructure links between nodes in the same layer (e.g. subway lines, bus routes, bike lanes, see also Section II).
Modeling infrastructures is of great importance for the understanding of how urban systems work, and the design of new sustainable mobility options. 

In the following we will review the scientific literature on the modelling (Section~\ref{sec:modelinginsrastructure}) and the characterization of multimodal urban transportation systems from a complex systems perspective (Section~\ref{sec:measuresinfrastructure}).

%Subsection modeling urban infrastructure
\subsection{Modeling urban infrastructure}\label{sec:modelinginsrastructure}

How do transportation layers are coupled and grow?
In this section we review the main models used to reproduce and understand multimodality in the city, and to simulate and test different scenarios with realistic data. 

One of the first contributions to the topic was provided by de Cea et al.~\cite{decea2005equilibrium}. In which the authors tackle the problem of modelling a city and their transportation options, an approach used by different cities and transportation agencies to make rational decisions with respect of future development of their transportation infrastructure. Although, models have been used to plan and simulate the effects of new transportation options, most of them failed to consider congestion associated with transit modes, this was a shortcoming when the models are used to predict equilibrium for future years. 

The model proposed by de Cea et al.~\cite{decea2005equilibrium}, takes the road network as the base, in which the links has an average operating cost that takes into account different mobility options (e.g. cars, taxi, etc.). For every pure public transportation layer a new network is defined, with their unique nodes and links. For these layers, the cost function of the public transportation links depend on the sum of travel, waiting, and transfer time, as well as on vehicle flow over the road network and the passenger flow in the existing services. The model considers the existence of combined trips (e.g. car/metro, bus/metro, etc). As for the equilibrium conditions the model's basic assumption is that every user chooses her route to minimize their average operation cost (Wardrop’s first principle). This means that at equilibrium, routes with flow will have an equal (minimum) cost, while those without flow will have an equal or greater cost than the minimum.

By taking into account the different layers in the system, flows, and travel cost, the authors are able to solve first a toy model, showing that their model is able to find the equilibrium in the trips between origin and destination. Finally, the authors show how the model can be applied into real world scenarios, it was used in Santiago (Chile) to evaluate the metro line 5. For the evaluation the model evaluated 13 user classes, 11 transport modes, and 450 zones (that means 439 trip matrices). The modelling results overestimate the demand in the morning peak period by about $15-20\%$, an acceptable range for these type of predictions.

A similar philosophy was deployed by Li et al.~\cite{li2007parkride}. Differently from the previous work in which the model takes in consideration the availability of routes, here the authors also introduce the parking behaviour and time spent while looking for parking of auto commuters. Taking into account these considerations, the authors focused on the interplay and impact of park-and-ride (P\&R) schemes to encourage users to switch from car travel to subway and public transportation options when traveling to the cities' central area. 

The model by Li et al.~\cite{li2007parkride} considers the effects of traffic conditions on travel demand, and incorporates elastic demand into the model to capture commuters’ responses to traffic congestion and availability of parking supply. The responses of a user include the decision to switch to another transportation option, or to not make the trip at all. The model, in the public transportation layer, also takes in consideration a level of discomfort resulting from the degree of crowding in transit vehicles. The final assumption of the model is that the mobility options for the commuters are: car, walk-metro, and park-and-ride.

When the authors analyzed the numerical simulations of the model, they found that the available parking spaces and cost in the P\&R locations heavily influence the choices of the agents. In the simulations, the authors found that it is possible to have a P\&R scheme that can simultaneously balance the parking demand and supply in the central area and at the P\&R site such that the parking resource is fully used. Furthermore, when considering the frequency and fare of metro lines, the findings suggest that with a fixed frequency the balance of parking demand and supply in the P\&R appears earlier (i.e., at a lower metro fare level) than in the cities' center. By contrast, for a fixed metro fare, the balance of parking demand and supply occurs earlier (i.e., lower frequency of metro lines) in the cities' center than in the P\&R site. 

The use of real world transportation infrastructure as a modeling framework for multilayer networks were first explicitly considered  by Gil~\cite{gil2014configuration}. There, the authors proposed to use open data from Open Street Map to model the urban mobility network of a given city. The proposed model is composed of three layers, first the street network (private transportation) in which the nodes are intersections and links are streets, this layer is the main interface with the other layers in the system, meaning that all other layers have to be connected to it. Second, the public transport layer that represents the stations as nodes and link them whenever there is a public transport service between two stations. This layer is then linked to the street layer by the stations and their closest street intersection. Finally, the third layer the authors incorporated into their model is the land use, even if it is not an integral part of multimodal transportation, the rational behind is that it is an integral part to measure accessibility and urban form.

After building their model, the authors applied it to analyze the Randstad city-region in the Netherlands. They tested the model under different parameters and layer combinations, measuring their closeness and betweenness centralities, and looking for significant statistical correlations of the analysis results with ground truth data, such as land us location, traffic, and passenger counts. The authors found that the betweeness centrality in the public transportation layer is a good indicator to passenger flows, the results improve when new layers are added into the model, except when adding the private transport layer. When the same measure were applied to the private transport layer the analysis did not capture the main roads and urban centers of the city, according to the study this effect has to do with the fact that the private layer contribute to a different phenomena in the region than the public transport.

As shown in the previous study, the private and public transport infrastructure contribute to different phenomena in the city, and thus each one can be investigated separately. For instance in Aleta et al.~\cite{Aleta2017Multilayer} the authors analyzed public transportation as a multilayer network following two approaches, the first one in which they modeled each bus/tram/subway line as a layer of the system. This approach is useful to take into consideration transfer times and synchronization between transport modes, however with this approach it is not possible to evaluate the importance of a transportation mode. The second approach is the most common one, in which all lines of the same mode are combined in a \textit{superlayer}. The authors approach was to use both modelling options, they showed that the \textit{superlayers} are fundamental to study the interdependency and resilience of the system while to have a realistic model of human mobility the single line per layer perspective should be adopted.

Using the two proposed models, the authors investigated the public transport systems for nine European cities. With the first model, the authors looked at the overlapping degree (sum of the node's degree in all layers). What the authors found was that even if all cities are different, the public transport infrastructure has some universal properties, the maximum overlapping degree is quite similar in all the networks, even though their number of layers -thus their theoretical maximum overlapping degree- differs a lot. This kind of generalized behaviour can be explained when we consider the city space in which the networks are embed. Thus, the real theoretical maxima (for both overlapping degree and edge overlap) are constrained by physical space and/or citizens' interest.

With the second proposed model, Aleta et al \cite{aleta2017transportation} proceeded to analyze the superlayers, first by comparing the overlapping degree with the superlayer activity (fraction of nodes that are active in $1, 2, \dots, M$ layers). They found that, suprisingly, the nodes with the highest overlapping degree are not the ones with the highest superlayer activity. In fact, the nodes (transport stops) belonging to just one superlayer are the ones which tend to have maximum overlapping degree. Those nodes that are present in only one superlayer, surely have a major role for the mobility of the system (think bus stops with multiple bus lines overlapping). As the authors pointed out, if we think in disruption of the system, it is easier to move a bus stop to a street nearby, even if it has multiple lines, than solve a disruption in a subway station. The authors later investigate the interdependence of the superlayers to find the importance of the superlayers based on the number of shortest paths that make use of the superlayer. As shown, the two proposed models are useful and complementary to investigate public transport systems, their functioning and to assess their vulnerabilities. 

The different models presented in this section, shown how the multilayer networks framework has been used to investigate the structure, function and vulnerabilities of the system. In the next section we cover some measures to quantify the effects of these structures and their interconnections.

\subsection{Characterizing multimodal infrastructure}\label{sec:measuresinfrastructure}

In the previous section we saw how to model the different mobility options as multilayer newtorks. The empirical study of multimodal transportation infrastructure has revealed different structural properties for this specific kind of networks. But how to quantify the effectiveness of their interconnectdeness? Here we discuss a number of measures used to capture the multiplexity of multimodal infrastructures, such as the importance of different nodes, the system's resilience, and the similarity between layers.

\paragraph*{Paths} 
At a more global scale, multimodality is often associated to the ability of an agent to navigate the system. The navigation of an agent (or group of agents) in a transportation network can be defined by different types of paths.

A first possibility is to consider the quickest path, which neglects waiting times between transportation modes and is computed using the largest speed in the edges, and assuming a perfect synchronization between the different transportation systems. This would be the equivalent to find the shortest path between $i$ and $j$ in a weighted-single layer network. However, the transportation networks also have a temporal dimension. In order to find a path that allows for a change between two -or more- different transportation options we must find a time-respecting path, this is the shortest path between nodes $i$ and $j$ that takes into account the departures and arrivals constraints usually given by timetables and more recently by GTFs Feeds. Furthermore, for multimodal transportation networks the walking transfer time between modes has to be taken into account when computing time-respecting paths.

Besides the time constraints to find a viable path between $i$ and $j$ in a multilayer transportation system, we also have to take into account the validity of the path~\cite{battista1996path, lozano2001path}, meaning that the path is viable if the proposed sequence of modes is within a set of constraints. These constrains can be defined in terms of cost, not only the cost of traversal of one link, but also the interchange between modes, and also in terms of sequence, as the shortest path can be a combination of subway-bus-subway-private car-subway that might solve the shortest path, but it will be an `illogical path' and an unlikely choice for a user. Hence, when looking for viable paths we look for the shortest path with no more than a predefined number of modal transfers.

The task to find viable paths is one of the most important problems in urban transportation, as it has the potential to help user to find the most efficient paths in the city. In their work Lozano et al.~\cite{lozano2001path} proposed an algorithm to find such paths when the agent establishes her limitations on the number of modal transfers.

When looking for shortest and viable paths the topology of the network has an effect, and certain layers of the multimodal network are of utmost importance. As shown by Aleta et al.~\cite{aleta2017transportation}, just by computing shortest paths, and disregarding the travel speed, the rail systems (trams, subway) contribute to most of the shortest paths in a city. As the authors points out, the reason behind this seams clear, the rail network connects distant points in straighter routes than bus or other transport modes. 

\paragraph*{Spatial outreach}
The availability of different transportation modes, such as subways or tramways, affects the accessibility of certain locations in the city. To measure this effect the spatial outreach is defined following Strano et al.~\cite{strano2015features} as the average Euclidean distance from node $i$ to all other nodes in the same layer $\alpha$ that are reachable within a given travel cost, $\tau$:

\begin{equation}
    L_\tau(i)=\frac{1}{N(\tau)}\sum_{j|\tau_{m}(i,j)<\tau}d_e(i,j),
    \label{eq:outreach}
\end{equation}

where $d_e(i,j)$ is the Euclidean distance between nodes $i$ and $j$, and $N(\tau)$ is the number of nodes reachable on the multilayer network within a travel cost $\tau$.

When investigating the travel outreach, Strano et al.~\cite{strano2015features} modified the average speed (traversal time of a link) in the layers of the system to measure their effects. They found that when the metro speed increases compare to the street layer speed, a continues area of high-outreach nodes emerges in the city center and around the nodes that have connections to the high-speed layer. In other words, as the velocity in layer $\beta$ increases the nodes that are closer to the interchange nodes in layer $\alpha$ improves their accessibility, implying that a person can travel from this areas to faraway places. 

The outreach and accessibility has also been studied in multimodal transport networks using isochrones (accessible area from a point within a certain time threshold). The work by Biazzo et al.~\cite{biazzo2019accesibility} used this approach to measure accessibility in different urban areas. The authors measure the accessibility (in an aggregated hexagon containing multiple intersections, no by single nodes), using the isochrones computed by the combination of public transit and pedestrian infrastructure. The isochrones where then used to obtained scores that capture how well a city is served by the public transit and how accessible is a specific area of the city to the rest of the city.

\paragraph*{Interdependency} \label{interdependence}
As shown in the previous measures the structure of the multimodal transportation network has different effects on how people can move in a city. One of this effects is the fraction of shortest paths that go from one node to all the others that makes use of two or more different layers. This topological interaction between different layers in a multilayer network can be described as a \textit{coupling}. For transportation networks a better approach is to measure the interdependency~\cite{morris2012transport,nicosia2013growing,strano2015features}

\begin{equation}
    \lambda_i=\frac{1}{N-1}\sum_{j\neq i}\frac{\psi_{ij}}{\sigma_{ij}},
    \label{eq:coupling}
\end{equation}

where $\psi_{ij}$ is the number of shortest paths between $i$ and $j$ that use edges in two or more different layers, and $\sigma_{ij}$ is the amount of shortest paths between $i$ and $j$. The quantity of interdependency of node $i$ lies in the interval $[0, 1]$, in which the larger values means that most of the paths go through two or more layers and closer to $0$ means that most of the paths go through just one layer. By taking the average over all nodes $\lambda = 1/N \sum_i\lambda_i$ we obtain the interdependency of the system. 

To take into account the nature of transportation networks this metric can be modified to calculate the interdependency of a layer in the system~\cite{Aleta2017Multilayer}, denoting $\psi_{ij}^\alpha$ as the number of shortest paths between nodes $i$ and $j$ that uses two or more layers and at least one of them is layer $\alpha$. The layer interdependency for layer $\alpha$ is defined as:

\begin{equation}\label{eq:layer_interdependency}
    \lambda^{\alpha}=\frac{\sum_i\sum_{i\neq j}\psi_{ij}^{\alpha}}{\sum_i\sum_{i\neq j}\psi_{ij}},
\end{equation}

this measure tells us how many paths go across two or more layers and at least one part of the path belongs to layer $\alpha$. Note that the normalization is over the multilayer shortest paths to find the layers that are used to change to another one.

When applying this measure to multimodal transport networks \cite{Aleta2017Multilayer} found that the metro and trams layers play an important role in concentrating shortest paths. For Madrid, the authors found that more than 40\% of the trips have at least one link in the metro layer, even if the metro layer has only 241 nodes while the bus layer has 4590 nodes. The reason behind the importance of the metro and tram layers seams clear, as they connect distant points with straighter routes than the other transportation options in the system.

\paragraph*{Centrality}
When analyzing a city and their mobility options one of the first task is to locate the transportation hubs, nodes in the system that have connections between different layers, and enable an agent to move and transfer between mobility options. At the same time, being central in one layer can mean that a node has multiple connections to other nodes in the system, for example a subway station that has multiple lines connecting on it.

In the street layer the number of possible connections from one node to the rest of the nodes in the system is constrained by the physical space, one intersection has a limited number of streets/sidwalks that can intersect there. However, when analyzing a single layer there are other centralities measures that can provide insights about the importance of a node or a link. One of these measures is the betweenness centrality~\cite{Freeman1977Centrality}, that in the absence of mobility data, is a good proxy to find bottlenecks in the system. The betweenness centrality measure the amount of shortest paths that go through one node/edge in the network. When calculating it for the node $i$ in layer $\alpha$ the betweenness centrality can be computed as follows:

\begin{equation}
     \text{bc}_i^\alpha=\frac{1}{(N^\alpha-1)(N^\alpha-2)}\sum_{j,k\in N^\alpha}\frac{\sigma_{j,k}^\alpha(i)}{\sigma_{j,k}^\alpha}, 
 \end{equation}

where $\sigma_{j,k}^\alpha$ is the total number of shortest paths between $i$ and $k$ in layer $\alpha$, and $\sigma_{j,k}^\alpha(i)$ is the number of shortest paths between $j$ and $k$ that goes through node $i$. Similarly, we can define the betweenness centrality of node $i$ in layer $\alpha$ for the multilayer network $\mathcal{M}$ as:

\begin{equation}
     \text{bc}_i^\text{multi}=\frac{1}{(N^\alpha-1)(N^\alpha-2)}\sum_{j,k\in N^\alpha}\frac{\sigma_{j,k}^\text{multi}(i)}{\sigma_{j,k}^\text{multi}}, 
\end{equation}

where $\sigma_{j,k}^\text{multi}$ is the total number of shortest paths between $i$ and $j$ in the multiplex network, and $\sigma_{j,k}^\text{multi}(i)$ is the total number of shortest paths between nodes $j$ and $k$ that goes through node $i$ in any layer.

As cities grow and new lines and options are added into the mobility system, new interconections between layers have to be added, thus the betweenness centrality also evolves. Ding et al.~\cite{ding2018traffic} studied how the centralities evolved when the rail network of Kuala Lumpur grow from a tree-like structure to a more complex one. Their findings suggest that as the network grows the average shortest path in the multilayer network decreases dramatically, also affecting the betweenness centrality, as new nodes are able to serve as interchange between layers, thus enabeling new shortest paths along the system.

The results from Ding et al.~\cite{ding2018traffic} are in line whit the previous findings by Strano et al.~\cite{strano2015features}, where they analyzed the coupling effect between the street and subway networks in London and New York. The authors shown that the introduction of new layers and their interconnections plays an important factor on decentralizing congestion in the street layer. The analysis of betweenness centrality shown that the subway systems have an effect as decentralixing force, moving the congestion (measured as betweenness) from internal street routes and bridges, to inter-modal places located at the terminal points of the subway system which might be used as interchange points for suburban flows into the city center.


\paragraph*{Resilience}
The structure of the multimodal system also plays an important role to understand the resilience of the transportation network. In a single layer network when a node fails it can not be traversed by any single path, as shown by de Domenico et al. ~\cite{dedomenico2019public} for the single layer representation of the public transportation network in Great Britain. However, if the node is part of a multimodal transportation network it can still be accessed by any of the other layers. To measure this resilience de Domenico et al.~\cite{dedomenico2014interconnected} used random walks and coverage methods to study London's transportation system, showing that the multiplexity of the system enhances its resilience to failure compared with a single layer. In a similar approach Baggag et al.~\cite{baggag2018resilience} used random walks to measure the coverage and robustness in multimodal transportation networks, in this case the authors introduced a limitation in the form of a given time budget or steps, showing that the layers interconnection helps to find paths from apparently isolated areas of the system. And more recently Ferretti et al.~\cite{ferretti2019resilience} used the multiplex framework to model Singapore's public transportation infrastructure and test its resilience against floods in the city in different scenarios, either removing nodes or edges from the multimodal network.

As with the resilience, the study of the multimodal structure has been a useful proxy to understand congestion in transportation systems when dynamical data is not available. As shown by Stano et al.~\cite{strano2015features} and later by Ding et al.~\cite{ding2018traffic} the spatial distribution of betweenness centrality changes when a new layer is introduced into the system, specifically when adding a subway the congestion shifts from internal street routes and bridges to intermodal places in terminal points of the subway network. In a similar sense, the work of Sol\'{e}-Ribalta et al.~\cite{sole-ribalta2016congestion} shows that the main driver in traffic dynamics and congestion in multimodal transport networks, is the change of paths from the least efficient layers to the most efficient one.


\paragraph*{Overlap census}\label{overlap}
One interesting problem when dealing with multimodal transportation networks is the characterization, and comparison between different cities based on their multimodal mobility options. For multiplex networks in general Nicosia et al.~\cite{nicosia2015measuring} proposed measures to capture nontrivial correlations in multiplex networks. And more recently, Brodka et al.~\cite{brodka2017similarity}, presented an overview of different metrics to compute similarities between layers in multiplex networks.

However a method to compare the mobility options and its infrastructure of different cities had yet to be proposed, a possible approach to this is the overlap census~\cite{natera2020multimodal}, that we cover in detail in Chapter~\ref{ch:OverlapCensus}.


\section{Multimodal mobility}\label{sec:multimodalmobility}

Understanding urban travel is paramount for a range of real-world applications, including planning transportation~\cite{patriksson2015traffic} and designing urban spaces. Starting from the 1950s, a large body of literature in the fields of Geography and Transportation has studied how people move and use transportation technology. 

As the transport infrastructure becomes increasingly multi-modal, modelling how individuals make travel decisions in complex interconnected networks is critical. In recent years, the scientific understanding of Human Mobility has dramatically improved, also due to the widespread diffusion of mobile-phone devices and other positioning technologies, which allowed to gather large-scale geo-localized datasets of human movements and develop increasingly realistic behavioural models. Concurrently, these recent developments were made possible by the dramatic growth of the fields of Complex Systems and Network Science, which brought together ideal tools to study interconnected systems (for a comprehensive review of the recent literature stream of Human Mobility, the reader can refer to~\cite{barbosa2018human}). Despite these advancements, our understanding of multimodal mobility in urban systems remains limited, also due to the difficulties related to collecting comprehensive data across multiple transportation modalities. 

In the following, we overview the scientific literature on multi-modal mobility. While our focus will be on multi-modality, we will inevitably touch upon some of the concepts related more broadly to modelling of urban travel. In Section~\ref{mobility_1}, we briefly overview existing models, focusing on latest advances driven by the Complex Systems literature. In Section~\ref{mobility_2}, we review measures and empirical findings, with a focus on recent studies based on passively collected data sources. 

\subsection{Modeling urban mobility \label{mobility_1}}
Modelling travel demand in a multimodal system involves understanding how individuals make decisions in a constantly changing complex environment. The most diffused family of models for travel demand in the Geography and Transportation literature are the so-called \emph{four-step models} proposing that each trip results from four decisions~\cite{mcnally2000four}: whether to make a trip or not, where to go, which mode to use, and which path to take. For simplicity, these have been largely considered as independent, sequential choices. We refer the reader to the excellent review by McNally~\cite{mcnally2000four}, for a comprehensive overview about this modeling approach.

In recent years, the literature in Complex Systems has modeled travel behavior on multiplex networks using different approaches, that we briefly review in this section. It is important to remark that, also due to the lack of empirical data on the mechanisms driving human navigation, most models are based on the simplistic assumption that individuals are rational, homogeneous and have unlimited knowledge. Research based on novel data sources will be key to develop mobility models on multilayer networks that include realistic elements such as limited knowledge and cognitive limitations.

\paragraph{Random walks.}
A random walk process is a prototypical model of mobility on a network, and it is defined by a walker that, located on a given node $i$ at time $t$, hops to a random nearest neighbor node $j$ at time $t + 1$. In the case of multilayer networks, the walk between nodes and layers can be described with four transition rules accounting for all possibilities~\cite{dedomenico2014interconnected}: (i) $P_{ii}^{\alpha\alpha}$, the probability for staying in the same node $i$ and layer $\alpha$; (ii) $P_{ij}^{\alpha\alpha}$ the probability of moving from node $i$ to $j$ in the same layer $\alpha$; (iii) $P_{ii}^{\alpha\beta}$ the probability of staying in the same node $i$ while changing to layer $\beta$; (iv) $P_{ij}^{\alpha\beta}$ the probability of moving from node $i$ to $j$ and from layer $\alpha$ to $\beta$, in the same time step. These probabilities depend on the strength of the links between nodes and layers (e.g. the frequency of vehicles and the cost associated to switching layers). 

Notwithstanding their simple formulation, random walks provide fundamental hints to understand all types of diffusion processes on networks and measure the dynamical functionality of a network. 
For example, random walks processes were studied to measure the navigability of multiplex networks~\cite{dedomenico2014interconnected}. 
To this end, one can measure the coverage of the multiplex network $\rho(t)$, defined as the average fraction of distinct nodes visited by a random walker in a time shorter than $t$ (assuming that walks started from any other node in the network), and describing the efficiency of a random walk in the network exploration:

\begin{equation}\label{coverage}
    \rho(t)=1-\\\frac{1}{N^2}\sum_{i,j=1}^{N}\delta_{i,j}(0)\text{exp}[-\mathbf{P}_j(0)\mathbb{P}\mathbf{E}_i^{\dagger}],
\end{equation}

where $\mathbf{P}_j(0)$ is the supravector of probabilities at time $t=0$, the matrix $\mathbb{P}$ accounts for the probability to reach each node through any path of length $1; 2; \dots \text{or}\ t+1$, and $\mathbf{E}_i^{\dagger}$ is a supra-canonical vector i allowing to compact the notation. In the work by De Domenico et al.~\cite{dedomenico2014interconnected}, the authors provided an alternative representation of equation \ref{coverage} building upon the eigendecomposition of the supra-Laplacian. They showed that the ability to explore a multiplex is influenced by different factors, including the topological structure of each layer and the strength of interlayer connections and the exploration strategy. Further, they showed that the multilayer system is more resilient to random failures than its individual layers separately because interconnected networks introduce additional paths from apparently isolated parts of single layers, and thus enhance the resilience to random failures.

Random walks can be used to assign a measure of importance to each node in each layer, by measuring the asymptotic probability of finding a random walker at a particular node-layer as time goes to infinity, the so-called `occupation centrality'\cite{sole2016random}. In the work by Sol\'{e}-Ribalta et al.~\cite{sole2016random}, the authors provided analytical expressions for the occupation centrality in the case of multilayer networks.

\paragraph{Agent-based models accounting for congestion.} 
Several works have focused on modelling agents aiming at minimizing total travel time in a congested network~\cite{tan2014congestion,bassolas2020scaling,manfredi2018congestion,sole-ribalta2016congestion}.

In Bassolas et al.~\cite{bassolas2020scaling}, the authors developed an agent-based models describing individuals mobility through a multilayer transportation system with limited capacity. The routing protocol used by individuals for planning is adaptive with local information. In the absence of congestion, individuals follow the temporal optimal path of the static multilayer network calculated by the Dijkstra algorithm. If there are line changes, they estimate, besides the change walking penalty, an additional waiting time of half the new line period (the real waiting time will be given by the vehicles location in the line when the individual arrives at the stop). Individuals’ route is only recalculated when a congested node, whose queue is larger than the vehicle’s capacity, is reached. They investigate analytically (for simple networks) and via numeric simulations the robustness of the network to exceptional events which give rise to congestion, such as demonstration concerts or sport events. The study revealed that the delay suffered by travellers as a function of the number of individuals participating in a large-scale event obeys scaling relations. The exponents describing these relations can be directly connected the number and line types crossing close to the event location. The study suggested a viable way to identify the weakest and strongest locations in cities for organizing massive events.

In a similar way, in the work by Manfreid et al.~\cite{manfredi2018congestion} the authors introduce a limit to the nodes capacity of storing and processing the agents. This limitation triggers temporary faults in the system affecting the routing of agents that looks for uncongested paths. 


\subsection{Characterizing multi-modal mobility. \label{mobility_2}}
Traditionally, multi-modal mobility models are calibrated using data from travel surveys: \emph{Revealed Preference} surveys retrieve actual travel information from the respondents, while \emph{Stated Preference} surveys expose the travelers to various hypothetical scenarios and record their choices~\cite{arentze2013travelers}. Studies based on survey data have provided insights into how multi-modal travelers value aspects such as the different travel time components (in-vehicle time, walk time, access time, wait time...)~\cite{abrantes2011meta}, service quality~\cite{wardman2001review}, and travel costs~\cite{arentze2013travelers}, and heterogeneities across socio-demographic groups ~\cite{nobis2007multimodality}. Due to the high costs associated with data collection and inherent biases in self-reported data, these studies suffer of serious limitations, including small sample sizes, data inaccuracy and incompleteness~\cite{chen2016promises,zannat2019emerging}. Covering empirical results from travel surveys is outside the scope of this review, and we refer the reader to ~\cite{arentze2013travelers} for a comprehensive introduction to the topic.

In recent years, the empirical research on Human Mobility has taken new directions. A growing body of literature has focused on quantitative descriptions of human movements from large, automatically collected data sources, such as mobile phone records, travel cards and GPS traces~\cite{barbosa2018human}. In this section, we overview recent empirical findings on multi-modal mobility in the field of Complex Systems, which focused on two important aspects: the dynamics of \emph{public transport systems}, whose study was driven by the availability of public transport data such as schedules and positions of stop and stations; and \emph{individual multi-modal behaviour}, driven by the availability of data collected using `smart travel cards' and GPS data. 

The existing empirical research on multi-modal travel based on passively collected data-sources is far from being comprehensive. Most studies have focused on public transit, such that the interplay between public and forms of private transportation such as walking, driving and cycling has been poorly characterized. Further, several studies are based on public transport schedules instead of real-time data, thus neglect important effects deriving from congestion. The increasing availability of high-resolution GPS trajectories collected by individual mobile phones and sensors installed on private and public transport vehicles~\cite{barbosa2018human}, will be key to fill these gaps in the literature.

\subsubsection{Public transport systems dynamics.} 
Over the last decade, the availability of detailed public transport schedules shared by public transport companies has allowed to better estimate travel times and characterize transport systems. 

\paragraph{Efficiency} 
To satisfy the demand of large number of individuals while reducing energy and costs, multilayer transport systems must achieve high efficiency. One aspect concerns the \emph{synchronization} between the network layers, because the more layers are synchronized, the less users have to wait for vehicles. The synchronization inefficiency $\delta(i,j)$~\cite{Gallotti2014Efficiency,barthelemy2016structure} for nodes $i$ and $j$ can be measured as as the ratio of the time-respecting travel time $\tau_t(i,j)$, which accounts for walking and waiting times and the fact that the speed of vehicles varies during the day, and the minimal travel time $\tau_m(i,j)$, where one assumes that vehicles travel at their maximum speed and transfer are instantaneous:

\begin{equation}
    \delta(i,j)=\frac{\tau_t(i,j)}{\tau_m(i,j)}-1
\end{equation}

Using the synchronization inefficiency, it was shown~\cite{Gallotti2014Efficiency} that, on average in the UK, $23\%$ of travel time is lost in connections for trips with more than one mode. Interestingly, across several urban transport system in the UK, the synchronization efficiency $\delta(i,j)$ obeys the same scaling relation with the path length $\ell(i,j)$:

\begin{equation} \label{eq:deltaSynchronization}
    \delta(i,j) \approx \delta_{\textit{min}}+\frac{\delta_{\textit{max}}-\delta_{\textit{min}}}{\ell(i,j)^v},
\end{equation}

with $v \approx 0.5$, and where $\delta_{\textit{max}}$ and $\delta_{\textit{min}}$ are the maximum and minimum values of $\delta(i,j)$ for a given urban transport system.

Further, it has been shown that the average synchronization inefficiency $\overline{\delta}$ for a given urban system follows: 

\begin{equation}
   \delta \sim \Omega^{-\mu},
\end{equation}

where $\Omega$ is the total number of stop-events per hour (e.g. the number of times a vehicle stops), and $\mu = 0.3 \pm 0.1$.

Other studies focused on the efficiency in terms of ability to satisfy users demand. In Alessandretti et al.~\cite{alessandretti2016user}, the authors introduced a method based on non-negative matrix factorization to compare the network of commuting flows and the public transport network. The methodology, applied to various public transport systems in France, showed that, while in Paris the transportation system meets the overall demands, it does not in smaller cities, where even people with access to fast public transportation prefer to use car. In Sui et al.~\cite{sui2019publictransport}, the authors proposed three topological metrics to quantify the interaction between public transport network and passengers’ flow and applied it to study differences between the cities of Chengdu and Qingdao in China. In Hollecsek et al.~\cite{holleczek2014detecting} the authors used data mining approaches to compare the use of public and private transportation and identify the existence of weak transportation connections.
 
\paragraph{Congestion.} 
Congestion can dramatically alter travel time estimates for routes that use popular network links in a urban system, but adding network layers in a multilayer transport system can help reduce global congestion~\cite{chodrow2016congestion}. Given a network with edges $e$ and flows $j_e$, one can quantify the total time lost in congestion as 

\begin{equation}
    T_c(\textbf{j})=\sum_{e\in \mathcal{L}}j_e(t_e^* - t_e(j_e)),
\end{equation}

where $\textbf{j}$ is the vector of flows whose $e$th element is the flow along edge $e$, $t_e^*$ is the free flow time on edge $e$ (in the absence of congestion), and $t_e(j_e)$ is the congested travel time in the presence of flow $j_e$. 
This measures can be used to analyze the impact of changes in flow along a route. The quantity
\begin{equation}
    \Delta_p = - \nabla T_c(\textbf{j}) \cdot \textbf{e}_p
\end{equation}

where $p$ is a path and $\textbf{e}_p$ is the vector whose $e$th component is 1 iff $e \in p$, quantifies the impact of removing a single unit of flow from $p$ on the global congestion function $T_c$. 
Chodrow et al.~\cite{chodrow2016congestion}, quantified how the creation of a planned metro network in Riyadh would affect congestion, by quantifying the change $\Delta_p$ as a function of the speed ratio between the street and metro systems:

\begin{equation}
    \beta = v_{c}/v_{m}
\end{equation}

The authors showed that, as the subway speed increases the global congestion is reduced, but increases locally close to key metro station.

\paragraph{Navigability} 
As cities and their transportation systems become increasingly complex and multimodal, it is important to quantify our difficulty navigating in them. It has been shown that multilayer transport system are characterized by limited navigability, implying that finding one's way is cognitively challenging \cite{gallotti2016limits}. To quantify the difficulty of navigating between two nodes $s$ and $t$ in a network, one can compute the total information value of knowing any of the shortest paths to reach $t$ from $s$:

\begin{equation}
S(s \rightarrow t) = - log_2 \sum_{\{p(s,t)\}} P[p(s,t)]
\end{equation}

where  ${p(s, t)}$ is the set of shortest paths between $s$ and $t$ (note that there can be more than one with the same length) and $P[p(s,t)]$ is the probability to follow path $p(s,t)$, making the right choice at each intersection along the path~\cite{rosvall2005networks}:

\begin{equation}
     P[p(s,t)]=\frac{1}{k_s}\prod_{j\in p(s,t)}\frac{1}{k_j-1}, 
\end{equation}

In Gallotti et al.~\cite{gallotti2016limits} the authors quantified the amount of information an individual needs in order to travel along the shortest path between any given pair of metro stations, in the single-layer metro networks for 15 large cities. They found that this information has an upper bound of the order of 8 bits, corresponding to approximately 250 connections between different routes. Further, studying several among the largest multi-layer transport networks (metro/buses/light rail), they showed that the amount of information one needs to know to travel between any two points exceeds the identified cognitive limit of 8 bits in 80\% the cases, suggesting multi-layer are too complex for individuals to navigate easily.

\subsubsection{Individual multi-modal behaviour.}
In recent years, data collected via smart travel cards has dramatically improved our ability to characterise multimodal behaviour in urban transport systems, overcoming some of the limitations related to collecting and analyzing survey data~\cite{chen2016promises,zannat2019emerging}. Smart-card automated fare collection systems allow passengers to make journeys involving different transport modes using magnetic cards and automatic gate machines. As these systems identify and store the location and time where individuals board and, in some cases, alight public transport, they collect accurate descriptions of individual travel~\cite{pelletier2011smart}. Concurrently, advancements were made possible by the development of methodologies allowing to identify typical travel patterns~\cite{ma2013mining}.


% \paragraph{Route choices.} 
% Smart-card data has allowed to quantify how individuals navigate multilayer networks. One of the key findings is that individuals do not choose optimal paths (those with shortest travel time), especially when the system is congested. Focusing on the bus and subway trips of 2.4 million passengers in Shenzen (China), Zheng et al.~\cite{zheng2018coupling} studied the coupling (see eq.\ref{eq:coupling}) between the bus and subway layers. In contrast to previous studies~\cite{strano2015features}, the authors characterized the coupling $\lambda$ engendered by passengers' behaviour rather than structural properties of the multilayer network. Under their definition, the \emph{coupling} between layers is the fraction of multimodal trips actually undertaken by passengers, rather than the fraction of multimodal shortest paths (see eq.\ref{eq:coupling}). The authors find that this `behavioural' coupling correlates weakly with the empirical speed ratio measured between the two layers over time, implying that passengers choose unimodal trips even when multimodal trips may be preferred because one of the two layers is congested. This finding highlights that the speed ratio of different network layers, which was regarded as a key factor in determining coupling strength~\cite{strano2015features,chodrow2016congestion}, may have a negligible effect on travelers’ route selections, possibly because passengers do not have a full view of the status of traffic. Instead, the authors showed that the coupling between layers is generated by long-distance trips originating from nodes served by a single transport layer.

% \paragraph{Power-law distribution of displacements} 
% The availability of large-scale data sources has allowed to reveal that individual mobility patterns display universal properties. One key finding is that the distribution $P(\Delta r)$ describing the probability of travelling a given distance $\Delta r$ is characterized by a power-law tail $P(\Delta r)\sim \Delta r ^{-\beta}$, with $1 \leq \beta \leq 2$~\cite{barbosa2018human}. Interestingly, it was shown that this observation could be the effect of the widespread use of multimodal transportation infrastructure~\cite{gallotti2016stochastic,zhao2015explaining}: In Zhao et al.~\cite{zhao2015explaining}, the authors used GPS data to show that mobility using a single mode can be approximated by a lognormal distribution, but the mixture of the distributions associated with each modality generates a power-law. In Gallotti et al.~\cite{gallotti2016stochastic}, the authors found that a simple model where individual trajectories are subject to changes in velocity generates a distribution of displacements with a power-law tail. In fact, individuals using multimodal infrastructure are subject to drastic changes in velocity. In Verga et al.~\cite{varga2016further}, the authors showed that the travel speed $v$ increases with travel distance according to the power-law functional form $v \sim r ^\alpha$, where $\alpha \approx 0.5$ . This dependence is due to the hierarchical structure of transportation systems and the fact that waiting-times (parking, take-off, landing, etc) decrease as a function of trip distance.